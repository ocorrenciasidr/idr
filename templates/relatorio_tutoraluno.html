<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SGCE - RELAT√ìRIO DE ALUNOS POR TUTOR</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <style>
        /* CSS para for√ßar a quebra de p√°gina a cada se√ß√£o de tutor (√∫til para PDF/impress√£o) */
        @media print {
            .tutor-section {
                page-break-after: always;
            }
            /* Esconde o bot√£o de voltar na impress√£o */
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-light p-4">
    <div class="container mt-4">
        
        <div class="d-flex justify-content-between align-items-center mb-4 no-print">
            <a href="{{ url_for('relatorio_inicial') }}" class="btn btn-secondary">‚¨ÖÔ∏è Voltar aos Relat√≥rios</a>
            <!-- Bot√£o de impress√£o, √∫til para exportar para PDF com a quebra de p√°gina -->
            <button onclick="window.print()" class="btn btn-primary">üñ®Ô∏è Imprimir/Exportar PDF</button>
        </div>

        <h2 class="mb-4 text-center">SISTEMA DE GEST√ÉO DE CONVIV√äNCIA ESCOLAR</h2>
        <h3 class="mb-5 text-center"><strong>RELAT√ìRIO DE ALUNOS POR TUTOR</strong></h3>

        {% for tutor, alunos in dados.items() %}
        <!-- Div para o tutor, com quebra de p√°gina ap√≥s (regra 'one tutor per page') -->
        <div class="card shadow p-4 mb-5 tutor-section">
            
            <!-- Nome do Tutor (linha abaixo do t√≠tulo) -->
            <h4 class="mb-3 text-primary">{{ tutor }}</h4>
            
            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>Aluno</th>
                            <th>Sala</th>
                            <th class="text-center">Quantidade Ocorr√™ncias</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for a in alunos %}
                        <tr>
                            <td>{{ a.Aluno }}</td>
                            <td>{{ a.Sala }}</td>
                            <td class="text-center">{{ a['Quantidade Ocorr√™ncias'] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
        </div>
        {% endfor %}

    </div>
    
    <!-- Rodap√© -->
    <footer class="text-center mt-5 mb-3">
        <small>Desenvolvido: Marcelo Andr√© Nogueira Cardes <br> Licenciado: EE PEI Prof¬™ Irene Dias Ribeiro</small>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
